{"ast":null,"code":"import _slicedToArray from\"D:/React/ro_draw/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,Fragment}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dummyData=[{id:1,name:\"銘謝惠顧\",percent:80},{id:2,name:\"A 恭喜\",percent:15},{id:3,name:\"AAAAA 恭喜\",percent:5}];var Draw=function Draw(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isClick=_useState2[0],setIsClick=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),prize=_useState4[0],setPrize=_useState4[1];var getRandomNumber=function getRandomNumber(){var sortPrizes=dummyData.sort(function(a,b){return a.percent-b.percent;});console.log(sortPrizes);var weightArray=sortPrizes.map(function(_,index){//利用 .map 做一個計數累加\nvar count=0;for(var i=0;i<=index;i++){count+=sortPrizes[i].percent;}return count;});console.log(\"weightArray: \",weightArray);var random=Math.random()*weightArray[weightArray.length-1];var index;for(var i=0;i<=weightArray.length;i++){if(weightArray[i]>=random){index=i;break;}}console.log(\"random: \",random);console.log(\"index: \",index);return sortPrizes[index].name;};var buttonClick=function buttonClick(){setIsClick(true);setPrize(getRandomNumber());};var resetButton=function resetButton(){setIsClick(false);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:buttonClick,children:\" \\u9EDE\\u6211\\u62BD\\u734E! \"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetButton,children:\" Reset !\"}),isClick&&/*#__PURE__*/_jsx(\"p\",{children:prize})]});};export default Draw;","map":{"version":3,"names":["React","useState","Fragment","dummyData","id","name","percent","Draw","isClick","setIsClick","prize","setPrize","getRandomNumber","sortPrizes","sort","a","b","console","log","weightArray","map","_","index","count","i","random","Math","length","buttonClick","resetButton"],"sources":["D:/React/ro_draw/src/components/Draw_Item/Draw.js"],"sourcesContent":["import React, { useState, Fragment } from \"react\";\r\n\r\nconst dummyData = [\r\n  {\r\n    id: 1,\r\n    name: \"銘謝惠顧\",\r\n    percent: 80,\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"A 恭喜\",\r\n    percent: 15,\r\n  },\r\n  {\r\n    id: 3,\r\n    name: \"AAAAA 恭喜\",\r\n    percent: 5,\r\n  },\r\n];\r\n\r\nconst Draw = () => {\r\n  const [isClick, setIsClick] = useState(false);\r\n  const [prize, setPrize] = useState(\"\");\r\n  const getRandomNumber = () => {\r\n    let sortPrizes = dummyData.sort((a, b) => a.percent - b.percent);\r\n    console.log(sortPrizes);\r\n    let weightArray = sortPrizes.map((_, index) => {\r\n      //利用 .map 做一個計數累加\r\n      let count = 0;\r\n      for (let i = 0; i <= index; i++) {\r\n        count += sortPrizes[i].percent;\r\n      }\r\n      return count;\r\n    });\r\n    console.log(\"weightArray: \", weightArray);\r\n    let random = Math.random() * weightArray[weightArray.length - 1];\r\n    let index;\r\n    for (let i = 0; i <= weightArray.length; i++) {\r\n      if (weightArray[i] >= random) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n    console.log(\"random: \", random);\r\n    console.log(\"index: \", index);\r\n    return sortPrizes[index].name;\r\n  };\r\n\r\n  const buttonClick = () => {\r\n    setIsClick(true);\r\n    setPrize(getRandomNumber());\r\n  };\r\n\r\n  const resetButton = () => {\r\n    setIsClick(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <button onClick={buttonClick}> 點我抽獎! </button>\r\n      <button onClick={resetButton}> Reset !</button>\r\n      {isClick && <p>{prize}</p>}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Draw;\r\n"],"mappings":"sGAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,KAA0C,OAA1C,C,wFAEA,GAAMC,UAAS,CAAG,CAChB,CACEC,EAAE,CAAE,CADN,CAEEC,IAAI,CAAE,MAFR,CAGEC,OAAO,CAAE,EAHX,CADgB,CAMhB,CACEF,EAAE,CAAE,CADN,CAEEC,IAAI,CAAE,MAFR,CAGEC,OAAO,CAAE,EAHX,CANgB,CAWhB,CACEF,EAAE,CAAE,CADN,CAEEC,IAAI,CAAE,UAFR,CAGEC,OAAO,CAAE,CAHX,CAXgB,CAAlB,CAkBA,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,cAA8BN,QAAQ,CAAC,KAAD,CAAtC,wCAAOO,OAAP,eAAgBC,UAAhB,eACA,eAA0BR,QAAQ,CAAC,EAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eACA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5B,GAAIC,WAAU,CAAGV,SAAS,CAACW,IAAV,CAAe,SAACC,CAAD,CAAIC,CAAJ,QAAUD,EAAC,CAACT,OAAF,CAAYU,CAAC,CAACV,OAAxB,EAAf,CAAjB,CACAW,OAAO,CAACC,GAAR,CAAYL,UAAZ,EACA,GAAIM,YAAW,CAAGN,UAAU,CAACO,GAAX,CAAe,SAACC,CAAD,CAAIC,KAAJ,CAAc,CAC7C;AACA,GAAIC,MAAK,CAAG,CAAZ,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIF,KAArB,CAA4BE,CAAC,EAA7B,CAAiC,CAC/BD,KAAK,EAAIV,UAAU,CAACW,CAAD,CAAV,CAAclB,OAAvB,CACD,CACD,MAAOiB,MAAP,CACD,CAPiB,CAAlB,CAQAN,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BC,WAA7B,EACA,GAAIM,OAAM,CAAGC,IAAI,CAACD,MAAL,GAAgBN,WAAW,CAACA,WAAW,CAACQ,MAAZ,CAAqB,CAAtB,CAAxC,CACA,GAAIL,MAAJ,CACA,IAAK,GAAIE,EAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIL,WAAW,CAACQ,MAAjC,CAAyCH,CAAC,EAA1C,CAA8C,CAC5C,GAAIL,WAAW,CAACK,CAAD,CAAX,EAAkBC,MAAtB,CAA8B,CAC5BH,KAAK,CAAGE,CAAR,CACA,MACD,CACF,CACDP,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBO,MAAxB,EACAR,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBI,KAAvB,EACA,MAAOT,WAAU,CAACS,KAAD,CAAV,CAAkBjB,IAAzB,CACD,CAvBD,CAyBA,GAAMuB,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxBnB,UAAU,CAAC,IAAD,CAAV,CACAE,QAAQ,CAACC,eAAe,EAAhB,CAAR,CACD,CAHD,CAKA,GAAMiB,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxBpB,UAAU,CAAC,KAAD,CAAV,CACD,CAFD,CAIA,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,eAAQ,OAAO,CAAEmB,WAAjB,yCADF,cAEE,eAAQ,OAAO,CAAEC,WAAjB,sBAFF,CAGGrB,OAAO,eAAI,mBAAIE,KAAJ,EAHd,GADF,CAOD,CA5CD,CA8CA,cAAeH,KAAf"},"metadata":{},"sourceType":"module"}